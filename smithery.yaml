startCommand:
  type: stdio
  configSchema:
    type: object
    properties:
      port:
        type: integer
        description: "服务器监听端口"
        default: 23999
        minimum: 1
        maximum: 65535
      maxFileSize:
        type: integer
        description: "最大文件大小(MB)"
        default: 1024
        minimum: 1
      uploadDir:
        type: string
        description: "文件上传目录"
        default: "uploads"
        minLength: 1
      cacheEnabled:
        type: boolean
        description: "是否启用缓存"
        default: true
      cacheTTL:
        type: integer
        description: "缓存有效期（分钟）"
        default: 60
        minimum: 1
    required: []
    additionalProperties: false
  commandFunction: |
    function getCommand(config) {
      const env = {
        NODE_ENV: 'production',
        PORT: String(config.port || 23999),
        MAX_FILE_SIZE: String(config.maxFileSize || 1024),
        UPLOAD_DIR: config.uploadDir || 'uploads',
        CACHE_ENABLED: Boolean(config.cacheEnabled),
        CACHE_TTL: String(config.cacheTTL || 60)
      };
      
      return {
        command: 'node',
        args: ['start-server.js'],
        env: env
      };
    }

build:
  dockerfile: Dockerfile
  dockerBuildPath: . 